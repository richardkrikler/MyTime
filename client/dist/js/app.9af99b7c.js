(function(e){function t(t){for(var n,s,i=t[0],c=t[1],u=t[2],l=0,p=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},o=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=c;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),a={class:"flex flex-col justify-center h-screen place-items-center dark:bg-gray-800"},o={class:"container"},s=Object(n["f"])("h1",{class:"text-3xl font-bold text-center border-2 dark:border-gray-700 rounded-xl p-3.5 m-2.5 text-gray-600 dark:text-gray-200"}," MyTime ",-1),i={class:"flex flex-row"};function c(e,t,r,c,u,d){var l=Object(n["l"])("timeline"),p=Object(n["l"])("tasks");return Object(n["i"])(),Object(n["e"])("div",a,[Object(n["f"])("div",o,[s,Object(n["f"])("div",i,[Object(n["g"])(l,{class:"container"}),Object(n["g"])(p,{class:"container"})])])])}var u={class:"border-2 dark:border-gray-700 rounded-xl m-2.5 p-3"};function d(e,t,r,a,o,s){var i=Object(n["l"])("timeline-hour");return Object(n["i"])(),Object(n["e"])("div",u,[(Object(n["i"])(),Object(n["e"])(n["a"],null,Object(n["k"])(24,(function(e){return Object(n["g"])(i,{key:e,hour:e},null,8,["hour"])})),64))])}r("d3b7");var l={class:"text-gray-500 dark:text-gray-300 py-1 pr-2 w-6 text-right"},p={class:"container"};function f(e,t,r,a,o,s){var i=Object(n["l"])("task");return Object(n["i"])(),Object(n["e"])("div",{class:"border-t-2 dark:border-gray-700 pl-2.5 flex flex-row",onDrop:t[0]||(t[0]=function(){return s.drop&&s.drop.apply(s,arguments)}),onDragover:t[1]||(t[1]=function(){return s.dragOver&&s.dragOver.apply(s,arguments)}),onDragleave:t[2]||(t[2]=function(){return s.dragLeave&&s.dragLeave.apply(s,arguments)}),onDragenter:t[3]||(t[3]=function(){return s.dragEnter&&s.dragEnter.apply(s,arguments)})},[Object(n["f"])("span",l,Object(n["m"])(r.hour),1),Object(n["f"])("div",p,[(Object(n["i"])(!0),Object(n["e"])(n["a"],null,Object(n["k"])(e.$store.getters.tasksAtHour(this.hour),(function(e){return Object(n["i"])(),Object(n["c"])(i,{task:e,key:e.id},null,8,["task"])})),128))])],32)}r("a9e3"),r("fb6a"),r("b0c0");var b=["id"],g={key:0,class:"font-bold text-gray-600 dark:text-gray-200"},k={class:"text-gray-500 dark:text-gray-300"};function v(e,t,r,a,o,s){return Object(n["i"])(),Object(n["e"])("div",{class:"border-2 dark:border-gray-700 my-2 mx-2 px-2.5 py-1.5 rounded-md bg-white dark:bg-gray-800 task",draggable:"true",onDragstart:t[0]||(t[0]=function(){return s.dragStart&&s.dragStart.apply(s,arguments)}),onDragend:t[1]||(t[1]=function(){return s.dragEnd&&s.dragEnd.apply(s,arguments)}),onDblclick:t[2]||(t[2]=function(){return s.dbClick&&s.dbClick.apply(s,arguments)}),id:r.task.id},[null!==r.task.properties["Topic"].select?(Object(n["i"])(),Object(n["e"])("p",g,Object(n["m"])(r.task.properties["Topic"].select.name),1)):Object(n["d"])("",!0),Object(n["f"])("p",k,Object(n["m"])(r.task.properties["Beschreibung"].title[0].text.content),1)],40,b)}var O={name:"Task",props:{task:{type:Object}},data:function(){return{visible:!0}},methods:{dragStart:function(e){e.dataTransfer.setData("text",this.task.id),setTimeout((function(){e.target.classList.add("invisible")}),0)},dragEnd:function(e){e.target.classList.remove("invisible")},dbClick:function(){this.$store.dispatch("updateTaskDate",{id:this.task.id,date:null})}}},h=r("6b0d"),j=r.n(h);const m=j()(O,[["render",v]]);var y=m,x=r("bee2"),D=r("d4ec"),T=Object(x["a"])((function e(t,r){Object(D["a"])(this,e),this.start=t,this.end=r,this.time_zone=null})),w={name:"TimelineHour",components:{Task:y},props:{hour:Number},methods:{drop:function(e){e.preventDefault();var t=function(e,t){e.setHours(t),e.setMinutes(0),e.setSeconds(0);var r=60*e.getTimezoneOffset()*1e3,n=e.getTime()-r,a=new Date(n),o=a.toISOString();return o.slice(0,19)+".000+00:00"},r=e.dataTransfer.getData("text"),n=new T(t(new Date,this.hour),t(new Date,this.hour+1));this.$store.dispatch("updateTaskDate",{id:r,date:n})},dragOver:function(e){e.preventDefault()},dragLeave:function(){},dragEnter:function(e){e.preventDefault()}}};const S=j()(w,[["render",f]]);var P=S,E={name:"Timeline",components:{TimelineHour:P}};const H=j()(E,[["render",d]]);var L=H;function _(e,t,r,a,o,s){var i=Object(n["l"])("task");return Object(n["i"])(),Object(n["e"])("div",{class:"border-2 dark:border-gray-700 rounded-xl m-2.5 p-1.5",onDrop:t[0]||(t[0]=function(){return s.drop&&s.drop.apply(s,arguments)}),onDragover:t[1]||(t[1]=function(){return s.dragOver&&s.dragOver.apply(s,arguments)}),onDragleave:t[2]||(t[2]=function(){return s.dragLeave&&s.dragLeave.apply(s,arguments)}),onDragenter:t[3]||(t[3]=function(){return s.dragEnter&&s.dragEnter.apply(s,arguments)})},[(Object(n["i"])(!0),Object(n["e"])(n["a"],null,Object(n["k"])(e.$store.getters.unassignedTasks,(function(e){return Object(n["i"])(),Object(n["c"])(i,{task:e,key:e.id},null,8,["task"])})),128))],32)}var M={name:"Tasks",components:{Task:y},created:function(){this.$store.dispatch("loadTasks")},methods:{drop:function(e){e.preventDefault();var t=e.dataTransfer.getData("text");this.$store.dispatch("updateTaskDate",{id:t,date:null})},dragOver:function(e){e.preventDefault()},dragLeave:function(){},dragEnter:function(e){e.preventDefault()}}};const $=j()(M,[["render",_]]);var C=$,J={name:"App",components:{Timeline:L,Tasks:C}};const W=j()(J,[["render",c]]);var A=W,I=r("1da1"),N=(r("96cf"),r("4de4"),r("c740"),r("e9c4"),r("07ac"),r("5502")),R="http://localhost:101",z=Object(N["a"])({state:{tasks:[]},getters:{tasks:function(e){return e.tasks},tasksAtHour:function(e){return function(t){return e.tasks.filter((function(e){if(null!==e.properties["When"].date){var r=new Date(e.properties["When"].date.start),n=60*r.getTimezoneOffset()*1e3,a=r.getTime()+n,o=new Date(a);return 0===o.getHours()?24===t:o.getHours()===t}}))}},unassignedTasks:function(e){return e.tasks.filter((function(e){return null===e.properties["When"].date}))},taskPosFromId:function(e){return function(t){return e.tasks.findIndex((function(e){return e.id===t}))}},isDateDifferent:function(e){return function(t,r){return JSON.stringify(r)!==JSON.stringify(e.tasks[t].properties["When"].date)}}},mutations:{updateTasks:function(e,t){e.tasks=t},updateTaskDate:function(e,t){var r=t.taskPos,n=t.date;e.tasks[r].properties["When"].date=n}},actions:{loadTasks:function(e){return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(R+"/tasks").then((function(e){return e.json()})).then((function(t){return e.commit("updateTasks",Object.values(t.results))}));case 2:case"end":return t.stop()}}),t)})))()},updateTaskDate:function(e,t){return Object(I["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.getters,a=e.commit,o=t.id,s=t.date,i=n.taskPosFromId(o),!(i<0||n.isDateDifferent(i,s))){r.next=7;break}return a("updateTaskDate",{taskPos:i,date:s}),r.next=7,fetch(R+"/task/"+o,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({notionDate:s})});case 7:case"end":return r.stop()}}),r)})))()}}});r("ba8c");Object(n["b"])(A).use(z).mount("#app")},ba8c:function(e,t,r){}});
//# sourceMappingURL=app.9af99b7c.js.map